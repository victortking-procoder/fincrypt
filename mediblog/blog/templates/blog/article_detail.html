{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="{{ article.summary|default:article.title }}">
  <meta name="keywords" content="blog, Layer 2, blockchain, crypto, finance, innovation">
  <meta name="google-site-verification" content="YaHSR5Rwl7MRmv4wQ7lWrMwE8D2UuKRhwfmJLpTZfHs" />
  <meta name="author" content="Victor Fredrick">
  <title>{{ article.title }} | FinCrypt Journal</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">

  <!-- ‚úÖ Popunder (load only once) -->
  <script type="text/javascript" src="//pl26967555.profitableratecpm.com/12/82/ae/1282ae23ee4e4bdaf146eb2d8ed14534.js"></script>
</head>
<body>
  <div class="container">

    <!-- ‚úÖ Header -->
    <header class="blog-header">
      <h1>{{ article.title }}</h1>
      <p class="timestamp">{{ article.created_at|date:"F j, Y" }}</p>
    </header>

    {% if article.image %}
      <img src="{{ article.image.url }}" alt="{{ article.title }}" class="article-image">
    {% endif %}

    <!-- ‚úÖ Top Banner Ad -->
    <div class="ad-slot">
      <script type="text/javascript">
        atOptions = {
          'key': 'cf35bd90582da0e405fece297d906346',
          'format': 'iframe',
          'height': 90,
          'width': 728,
          'params': {}
        };
      </script>
      <script src="//www.highperformanceformat.com/cf35bd90582da0e405fece297d906346/invoke.js"></script>
    </div>

    <!-- ‚úÖ Article Content + Auto Ads -->
    <div class="article-content">
      {% for para in paragraphs %}
        <p>{{ para|linebreaksbr }}</p>

        {% if forloop.counter|divisibleby:3 %}
          <!-- Auto-injected Ad every 3 paragraphs -->
          <div class="ad-slot">
            <div id="ad-container-{{ forloop.counter }}"></div>
            <script type="text/javascript">
              (function() {
                var containerId = "ad-container-{{ forloop.counter }}";
                var script = document.createElement("script");
                script.async = true;
                script.setAttribute("data-cfasync", "false");
                script.src = "//pl26967571.profitableratecpm.com/b778ea2e251188379241d94f8dbe850a/invoke.js";
                document.getElementById(containerId).appendChild(script);
              })();
            </script>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <!-- ‚úÖ Code Reveal Box -->
    {% if show_code %}
      <div class="code-box">
        <h3>üéâ Your code: <strong>{{ code }}</strong></h3>
      </div>
    {% endif %}

    <!-- ‚úÖ Next Article with 60s Wait -->
    {% if next_sequence and sequence != 10 %}
      <div class="next-section">
        <a href="/article/{{ next_sequence }}/" id="nextBtn" class="next-btn">Next Article</a>
        <p id="timer">Please wait 60 seconds...</p>
      </div>
    {% endif %}

    <!-- ‚úÖ Back Button -->
    <a href="{% url 'blog_list' %}" class="back-button">‚Üê Back to Blog List</a>

    <!-- ‚úÖ Footer Banner Ad -->
    <div class="ad-slot">
      <script type="text/javascript">
        atOptions = {
          'key': 'cf35bd90582da0e405fece297d906346',
          'format': 'iframe',
          'height': 90,
          'width': 728,
          'params': {}
        };
      </script>
      <script src="//www.highperformanceformat.com/cf35bd90582da0e405fece297d906346/invoke.js"></script>
    </div>

    <!-- ‚úÖ Social Bar (one-time) -->
    <script type="text/javascript" src="//pl26970011.profitableratecpm.com/e8/40/3b/e8403b2f848c2c74abf2d141d873e50c.js"></script>
  </div>

  <!-- ‚úÖ Countdown Timer Logic -->
  {% if next_sequence and sequence != 10 %}
  <script>
    let waitTime = 60;
    const timerEl = document.getElementById('timer');
    const nextBtn = document.getElementById('nextBtn');
    nextBtn.classList.add('disabled');
    nextBtn.style.pointerEvents = 'none';

    const countdown = setInterval(() => {
      waitTime--;
      timerEl.textContent = `Please wait ${waitTime} seconds...`;
      if (waitTime <= 0) {
        clearInterval(countdown);
        nextBtn.classList.remove('disabled');
        nextBtn.style.pointerEvents = 'auto';
        timerEl.textContent = "You can now continue.";
      }
    }, 1000);
  </script>
  {% endif %}
</body>
</html>


